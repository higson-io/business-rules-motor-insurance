version: "3.7"
services:
  db:
    container_name: db
    image: hyperonio/bundle-h2-demo:2.0.2
    ports:
      - "8082:8082"
      - "9092:9092"
    networks:
      - hyperon-net

  studio:
    container_name: studio
    image: hyperonio/studio:2.2.2
    environment:
      - hyperon.database.url=jdbc:h2:tcp://db/hyperon.demo;NON_KEYWORDS=VALUE
      - hyperon.database.dialect=h2
      - hyperon.database.username=sa
      - hyperon.database.password=sa
      - hyperon.studio.setup.password-force-change.enabled=false
    ports:
      - "38080:8080"
    depends_on:
      - db
    networks:
      - hyperon-net

  runtime-rest:
    container_name: runtime-rest
    image: hyperonio/runtime-rest:2.2.2
    environment:
      - hyperon.database.url=jdbc:h2:tcp://db/hyperon.demo;NON_KEYWORDS=VALUE
      - hyperon.database.dialect=h2
      - hyperon.database.username=sa
      - hyperon.database.password=sa
      - hyperon.runtime.function.validate-arguments=true
    ports:
      - "8081:8081"
    depends_on:
      - db
    networks:
      - hyperon-net

  web:
    container_name: demo
    image: hyperonio/motor-demo:latest
    environment:
      - HYPERON_DATABASE_URL=jdbc:h2:tcp://db/hyperon.demo;NON_KEYWORDS=VALUE
    ports:
      - "48080:48080"
    depends_on:
      - db
    networks:
      - hyperon-net

networks:
  hyperon-net:
    driver: bridge
